.include "m328Pdef.inc"
.equ	PERIOD	=	16			; En milisegundos
.equ	FREQUENCY  =	60			; Hertz
.equ	DELAYCNTS=	PERIOD*(25000)/1000	; Cuentas para dicho periodo

.org	0
main:
	ldi	r18,0xFF
	ldi	r17,0x00
	out	DDRD,r18
	clr	r18
	out	PORTD,r18
limpia:
	ldi	ZH,HIGH(0x50 << 1)
	ldi	ZL,LOW(0x50 << 1)
	ldi	r17,0x00
loop:
	lpm	r17,Z+
	inc 	r18
	cpi	r18,0xff
	breq	limpia
	out	PORTD,r17
	rcall	delay
	rjmp	loop

;	Funcion de retraso
delay:
	push	r16
	ldi	r16,1
exterior:
	ldi	XH,HIGH(0xFF)
	ldi	XL,LOW(0xfF)
interior:
	sbiw	XL,1
	brne	interior
	dec	r16
	brne	exterior
	pop	r16
	
	ret

.org 0x50
.cseg
datos:
 
.db 0x80,0x81,0x82,0x84,0x85,0x87,0x88,0x89,0x8A,0x8B,0x8D,0x8E,0x8F,0x90,0x91,0x93,0x94,0x95,0x96,0x97,0x98,0x99,0x9A,0x9B,0x9C,0x9D
        .db 0x9D,0x9E,0x9F,0xA0,0xA1,0xA2,0xA3,0xA4,0xA5,0xA6,0xA7,0xA7,0xA8,0xA9,0xAA,0xAA,0xAB,0xAB,0xAC,0xAD,0xAD,0xAE,0xAE,0xAF
        .db 0xAF,0xAF,0xB0,0xB0,0xB0,0xB1,0xB1,0xB1,0xB1,0xB1,0xB2,0xB2,0xB2,0xB2,0xB2,0xB2,0xB2,0xB2,0xB2,0xB2,0xB2,0xB1,0xB1,0xB1
        .db 0xB1,0xB0,0xB0,0xB0,0xAF,0xAF,0xAE,0xAE,0xAD,0xAD,0xAC,0xAC,0xAB,0xAB,0xAA,0xA9,0xA8,0xA8,0xA7,0xA6,0xA5,0xA4,0xA4,0xA3,0xA2,0xA1,0xA0,0xa0
        .db 0xA0,0x9F,0x9E,0x9D,0x9C,0x9B,0x9A,0x99,0x98,0x97,0x95,0x94,0x93,0x92,0x91,0x90,0x8E,0x8D,0x8C,0x8B,0x8A,0x88,0x87,0x86,0x85,0x83,0x82,0x82
        .db 0x82,0x81,0x80,0x7E,0x7D,0x7C,0x7B,0x79,0x78,0x77,0x76,0x74,0x73,0x72,0x71,0x70,0x6E,0x6D,0x6C,0x6B,0x6A,0x69,0x67,0x66,0x65,0x64,0x63,0x62,0x61,0x61
        .db 0x61,0x60,0x5F,0x5E,0x5D,0x5C,0x5B,0x5A,0x5A,0x59,0x58,0x57,0x56,0x56,0x55,0x54,0x53,0x53,0x52,0x52,0x51,0x51,0x50,0x50,0x4F,0x4F,0x4E,0x4E,0x4E,0x4e
        .db 0x4E,0x4D,0x4D,0x4D,0x4D,0x4C,0x4C,0x4C,0x4C,0x4C,0x4C,0x4C,0x4C,0x4C,0x4C,0x4C,0x4D,0x4D,0x4D,0x4D,0x4D,0x4d
        .db 0x4D,0x4E,0x4E,0x4E,0x4F,0x4F,0x50,0x50,0x51,0x51,0x52,0x53,0x53,0x54,0x54,0x55,0x56,0x57,0x57,0x58,0x59,0x5A,0x5B,0x5B,0x5b,0x5b
        .db 0x5C,0x5D,0x5E,0x5F,0x60,0x61,0x62,0x63,0x64,0x65,0x66,0x67,0x68,0x69,0x6A,0x6B,0x6D,0x6E
        .db 0x6E,0x6F,0x70,0x71,0x73,0x74,0x75,0x76,0x77,0x79,0x7A,0x7B,0x7C,0x7E,0x7F,0x7F
